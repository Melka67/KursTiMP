/**
 * @file server.h
 * @brief Заголовочный файл класса сервера
 * @author Мелькаев Евгений
 * @date 2025
 */

#ifndef SERVER_H
#define SERVER_H

#include <string>

/**
 * @brief Класс сервера для обработки клиентских подключений
 * 
 * Отвечает за:
 * - Создание и настройку сокета
 * - Ожидание входящих подключений
 * - Обработку клиентов в отдельных сессиях
 * - Загрузку базы данных пользователей
 */
class Server {
public:
    /**
     * @brief Запускает сервер
     * @param port Порт для прослушивания
     * @param configFile Путь к файлу конфигурации
     * @return true Сервер успешно запущен
     * @return false Ошибка запуска сервера
     * 
     * Последовательность действий:
     * 1. Загрузка базы данных
     * 2. Создание сокета
     * 3. Привязка к порту
     * 4. Начало прослушивания
     * 5. Обработка входящих подключений
     */
    bool start(int port, const std::string& configFile);
    
private:
    /**
     * @brief Обрабатывает клиентское подключение
     * @param clientSocket Дескриптор клиентского сокета
     * 
     * Выполняет:
     * 1. Аутентификацию клиента
     * 2. Обработку векторных данных
     * 3. Закрытие соединения
     */
    void handleClient(int clientSocket);
};

#endif